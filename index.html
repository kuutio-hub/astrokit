<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amat≈ërcsillag√°sz Sv√°jci Bicska</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100%22><text y=%22.9em%22 font-size=%2290%22>üî≠</text></svg>">
    <script src="https://unpkg.com/suncalc@1.9.0/suncalc.js"></script>
    <script src="https://unpkg.com/phosphor-icons"></script>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="title-container">
                <h1 class="main-title"><i class="ph-shooting-star"></i> <span class="long-title">Amat≈ërcsillag√°sz Sv√°jci Bicska</span><span class="short-title">Amat≈ërcsillag√°sz Bicska</span></h1>
            </div>
            <nav id="main-nav" class="desktop-nav">
                <button class="nav-item active" data-target="dashboard" title="M≈±szerfal"><i class="ph-gauge"></i></button>
                <button class="nav-item" data-target="planner" title="√âszlel√©s Tervez≈ë"><i class="ph-eye"></i></button>
                <button class="nav-item" data-target="calculators" title="Kalkul√°torok"><i class="ph-calculator"></i></button>
                <button class="nav-item" data-target="polar-align" title="P√≥lusra √Åll√°s"><i class="ph-navigation-arrow"></i></button>
                <button class="nav-item" data-target="astrophoto" title="Asztrofot√≥"><i class="ph-camera"></i></button>
                <button class="nav-item" data-target="analemma" title="Analemma"><i class="ph-sun-horizon"></i></button>
                <button class="nav-item" data-target="calendar" title="Napt√°r"><i class="ph-calendar"></i></button>
                <button class="nav-item" data-target="wiki" title="Tud√°st√°r"><i class="ph-books"></i></button>
            </nav>
            <div class="controls">
                <button id="night-mode-toggle" class="icon-button" aria-label="√âjszakai m√≥d kapcsol√≥ja">
                    <i class="ph ph-moon"></i>
                </button>
                <button id="menu-toggle" class="icon-button mobile-only" aria-label="Men√º megnyit√°sa">
                    <i class="ph ph-list"></i>
                </button>
            </div>
        </header>
        
        <div id="mobile-menu" class="mobile-menu-overlay">
            <a href="#dashboard" class="mobile-nav-item" data-target="dashboard"><i class="ph-gauge"></i> M≈±szerfal</a>
            <a href="#planner" class="mobile-nav-item" data-target="planner"><i class="ph-eye"></i> √âszlel√©s Tervez≈ë</a>
            <a href="#calculators" class="mobile-nav-item" data-target="calculators"><i class="ph-calculator"></i> Kalkul√°torok</a>
            <a href="#polar-align" class="mobile-nav-item" data-target="polar-align"><i class="ph-navigation-arrow"></i> P√≥lusra √Åll√°s</a>
            <a href="#astrophoto" class="mobile-nav-item" data-target="astrophoto"><i class="ph-camera"></i> Asztrofot√≥</a>
            <a href="#analemma" class="mobile-nav-item" data-target="analemma"><i class="ph-sun-horizon"></i> Analemma</a>
            <a href="#calendar" class="mobile-nav-item" data-target="calendar"><i class="ph-calendar"></i> Napt√°r</a>
            <a href="#wiki" class="mobile-nav-item" data-target="wiki"><i class="ph-books"></i> Tud√°st√°r</a>
        </div>


        <main>
            <div id="loader" class="loader-container">
                <div class="loader"></div>
                <p>Helymeghat√°roz√°s √©s adatok bet√∂lt√©se...</p>
            </div>
            
            <div id="error-container" class="error-container" style="display: none;"></div>

            <section id="dashboard" class="content-section active">
                <div id="dashboard-container" class="dashboard-container">
                    <!-- Dashboard accordions will be injected by JS -->
                </div>
            </section>
            
            <section id="planner" class="content-section">
                <h2><i class="ph-eye"></i> √âszlel√©s Tervez≈ë</h2>
                <div class="card">
                     <div id="planner-filters" class="planner-filters">
                         <input type="text" id="planner-search" placeholder="Keres√©s n√©v alapj√°n...">
                         <select id="planner-type-filter">
                             <option value="all">Minden t√≠pus</option>
                         </select>
                         <select id="planner-const-filter">
                             <option value="all">Minden csillagk√©p</option>
                         </select>
                         <label class="toggle-switch">
                            <input type="checkbox" id="planner-visible-only" checked>
                            <span class="slider"></span>
                            Csak a l√°that√≥k
                        </label>
                     </div>
                     <div class="table-container">
                         <table id="planner-table">
                             <thead>
                                 <tr>
                                     <th>N√©v</th>
                                     <th>T√≠pus</th>
                                     <th>Csillagk√©p</th>
                                     <th>Magass√°g</th>
                                     <th>L√°that√≥s√°g</th>
                                     <th>R√©szletek</th>
                                 </tr>
                             </thead>
                             <tbody id="planner-table-body">
                                 <!-- Planner rows will be injected by JS -->
                             </tbody>
                         </table>
                     </div>
                </div>
            </section>

            <section id="calculators" class="content-section">
                <div class="sticky-container">
                    <div class="accordion">
                        <button class="accordion-header">
                            <h3><i class="ph-gear-six"></i> Felszerel√©s Alapbe√°ll√≠t√°sai</h3>
                            <i class="ph ph-caret-down accordion-icon"></i>
                        </button>
                        <div class="accordion-content">
                            <form id="main-gear-form" class="form-grid">
                                 <div><label>T√°vcs≈ë √°tm√©r≈ëje (mm): <input type="number" name="teleAperture" value="120"></label></div>
                                 <div><label>T√°vcs≈ë f√≥kuszt√°vols√°ga (mm): <input type="number" name="teleFocalLength" value="1000"></label></div>
                                 <div><label>Okul√°r f√≥kuszt√°vols√°ga (mm): <input type="number" name="eyeFocalLength" value="10"></label></div>
                                 <div><label>Okul√°r l√°t√≥mezeje (¬∞): <input type="number" name="eyeAFOV" value="52"></label></div>
                                 <div><label>Kamera: <select name="cameraSelect" id="cameraSelect"></select></label></div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="thematic-results-grid">
                    <div class="card">
                         <h3><i class="ph-binoculars"></i> Optikai Jellemz≈ëk</h3>
                         <ul id="results-optics" class="data-list-results"></ul>
                    </div>
                     <div class="card">
                         <h3><i class="ph-ruler"></i> Felbont√°s √©s F√©nygy≈±jt√©s</h3>
                         <ul id="results-resolution" class="data-list-results"></ul>
                    </div>
                    <div class="card">
                        <h3><i class="ph-camera-rotate"></i> Kamera √©s √ârz√©kel≈ë</h3>
                        <ul id="results-ccd" class="data-list-results"></ul>
                    </div>
                </div>
            </section>

            <section id="polar-align" class="content-section">
                <h2><i class="ph-navigation-arrow"></i> P√≥lusra √Åll√°s Seg√©dlet</h2>
                <div class="card">
                    <p class="description">
                        Ez a seg√©dlet a Sarkcsillag (Polaris) aktu√°lis helyzet√©t mutatja az √âszaki √âgi P√≥lus (NCP - a F√∂ld forg√°stengely√©nek d√∂f√©spontja) k√∂r√ºl. A k√∂zponti kereszt az NCP. A ragyog√≥ k√∂r a Polaris. A diagram egy p√≥lust√°vcs≈ë sz√°lkeresztj√©t szimul√°lja a 12 √≥r√°s beoszt√°ssal. A Tud√°st√°rban r√©szletes le√≠r√°st tal√°lsz a haszn√°lat√°r√≥l.
                    </p>
                    <div id="polar-align-container" class="canvas-container">
                         <canvas id="polar-align-canvas" width="400" height="400"></canvas>
                         <p id="polar-align-info">Helyi Csillagid≈ë: --:-- | √ìrasz√∂g: --¬∞</p>
                    </div>
                </div>
            </section>

            <section id="astrophoto" class="content-section">
                <h2><i class="ph-camera"></i> Asztrofot√≥s Seg√©dlet</h2>
                <div class="astrophoto-setup">
                    <div class="card">
                        <h3><i class="ph ph-gear"></i> 1. Forgat√≥k√∂nyv √©s Be√°ll√≠t√°sok</h3>
                        <form id="astrophoto-form">
                            <label>Fot√≥z√°si m√≥d:
                                <select id="photo-scenario">
                                    <option value="tripod" selected>Csak kamera √°llv√°nyon (k√∂vet√©s n√©lk√ºl)</option>
                                    <option value="piggyback">Kamera k√∂vet≈ë mechanik√°n (Piggyback)</option>
                                    <option value="primefocus">Kamera primer f√≥kuszban (k√∂vet√©ssel)</option>
                                </select>
                            </label>
                            <div class="form-grid-2">
                                <div><label>Objekt√≠v f√≥kusza (mm): <input type="number" id="ap-focal-length" value="50"></label></div>
                                <div><label>Objekt√≠v rekesze (f/): <input type="number" id="ap-aperture" value="2.8" step="0.1"></label></div>
                            </div>
                             <label>F√©nyszennyezetts√©g:
                                <select id="ap-light-pollution">
                                    <option value="rural">Vid√©ki √©g (Bortle 1-4)</option>
                                    <option value="suburban" selected>El≈ëv√°rosi √©g (Bortle 5-7)</option>
                                    <option value="city">V√°rosi √©g (Bortle 8-9)</option>
                                </select>
                            </label>
                        </form>
                    </div>
                    <div class="card">
                        <h3><i class="ph ph-lightbulb"></i> 2. Eredm√©nyek √©s Javaslatok</h3>
                        <div id="astrophoto-results">
                            <div class="result-item">
                                <h4><i class="ph ph-timer"></i> Max. expoz√≠ci√≥s id≈ë</h4>
                                <p id="res-exposure-time" class="res-value">-- s</p>
                                <p id="res-exposure-rule" class="res-desc">NPF Szab√°ly alapj√°n</p>
                            </div>
                            <div class="result-item">
                                <h4><i class="ph ph-aperture"></i> Javasolt ISO tartom√°ny</h4>
                                <p id="res-iso-range" class="res-value">ISO ---- - ----</p>
                                <p class="res-desc">F√©nyer≈ë √©s f√©nyszennyez√©s alapj√°n</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="analemma" class="content-section">
                <div class="card">
                    <div class="analemma-header">
                        <h2><i class="ph-sun-horizon"></i> Helyi Analemma</h2>
                        <div class="analemma-controls">
                            <label for="analemma-time">Id≈ëpont:</label>
                            <input type="range" id="analemma-time" min="6" max="18" value="10.5" step="0.5">
                            <span id="analemma-time-display">10:30</span>
                        </div>
                    </div>
                    <p class="description">
                        Az analemma a Nap √©gi poz√≠ci√≥j√°t mutatja az √©v minden napj√°n, a kiv√°lasztott id≈ëpontban. A cs√∫szk√°val v√°ltoztathatod az id≈ëpontot, √©s megfigyelheted, hogyan d≈ël √©s v√°ltozik a g√∂rbe alakja. A klasszikus, √°ll√≥ "nyolcas" a helyi d√©l (kb. 12:00) idej√©n l√°that√≥.
                    </p>
                    <div class="canvas-container">
                         <canvas id="analemma-canvas" width="600" height="400"></canvas>
                         <div id="analemma-tooltip" class="info-tooltip"></div>
                         <div id="analemma-loader" class="loader-container" style="display: none;">
                            <div class="loader"></div>
                            <p>Analemma sz√°m√≠t√°sa...</p>
                         </div>
                    </div>
                    <p class="canvas-note">Megjegyz√©s: A "nyolcas" forma jobb l√°that√≥s√°ga √©rdek√©ben a v√≠zszintes tengely (oldalir√°ny√∫ elt√©r√©s) ar√°nyai a f√ºgg≈ëlegeshez k√©pest k√©tszeres√©re vannak nagy√≠tva.</p>
                </div>
            </section>

            <section id="calendar" class="content-section">
                <h2><i class="ph-calendar"></i> Csillag√°szati Esem√©nynapt√°r</h2>
                 <div class="card">
                    <div id="calendar-controls">
                        <button id="prev-month"><i class="ph ph-caret-left"></i></button>
                        <h3 id="calendar-month-year"></h3>
                        <button id="next-month"><i class="ph ph-caret-right"></i></button>
                    </div>
                    <div id="calendar-grid"></div>
                    <div id="calendar-legend"></div>
                 </div>
            </section>

            <section id="wiki" class="content-section">
                <h2><i class="ph-books"></i> Tud√°st√°r</h2>
                <!-- Wiki accordions will be injected by JS -->
                <div id="wiki-container"></div>
            </section>

        </main>

        <footer>
            <p>K√©sz√ºlt szeretettel magyar csillag√°szoknak. | <span id="app-version"></span></p>
        </footer>
    </div>
    
    <div id="app-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button id="modal-close" class="modal-close-btn"><i class="ph ph-x"></i></button>
            <div id="modal-body"></div>
        </div>
    </div>

    <div id="info-tooltip" class="info-tooltip" style="display: none;"></div>
    <script type="module" src="js/main.js"></script>
</body>
</html>